<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ‚Äî Auto GBP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–∞—Ä—Ç–æ—Å—Ç—ñ –∞–≤—Ç–æ –∑ –°–®–ê/–Ñ–≤—Ä–æ–ø–∏ –≤—ñ–¥ Auto GBP (Grand Best Performance)." />

  <style>
    :root{
      --bg:#050608;
      --bg2:#0b0c10;
      --card:#0d0d11;
      --border:#262935;
      --gold:#ffd86a;
      --gold2:#c69528;
      --text:#f7f7f7;
      --muted:#a0a0a0;
      --ok:#65d96b;
      --radius-lg:18px;
      --radius-md:12px;
      --radius-sm:10px;
      --shadow:0 18px 40px rgba(0,0,0,.70);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#141821 0,#020308 55%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
    }
    a{color:var(--gold);text-decoration:none}

    .container{width:min(1120px,100% - 32px);margin:0 auto}

    /* ===== TOP (—è–∫ —Ä–∞–Ω—ñ—à–µ) ===== */
    .top{
      position:sticky;top:0;z-index:20;
      backdrop-filter:blur(18px);
      background:linear-gradient(to bottom, rgba(5,6,8,.96), rgba(5,6,8,.85));
      border-bottom:1px solid rgba(255,216,106,.18);
    }
    .top-inner{
      display:flex;flex-direction:column;gap:10px;
      padding:12px 0 14px;
      align-items:center;
      text-align:center;
    }
    .brand{
      display:flex;align-items:center;gap:10px;
      justify-content:center;
    }
    .logo{
      width:34px;height:34px;border-radius:50%;
      background:radial-gradient(circle at 30% 20%, #ffeaa0, var(--gold2));
      box-shadow:0 0 0 1px rgba(0,0,0,.6), 0 0 18px rgba(255,216,106,.45);
      overflow:hidden;
      display:flex;align-items:center;justify-content:center;
    }
    .logo img{width:120%;height:auto;display:block}
    .brand-title{
      font-weight:1000;letter-spacing:4px;font-size:18px;
      color:var(--gold);
      text-shadow:0 0 18px rgba(255,216,106,.18);
    }
    .brand-sub{font-size:12px;color:var(--muted);margin-top:2px}

    .nav{
      display:flex;gap:14px;flex-wrap:wrap;
      justify-content:center;
      font-size:14px;
    }
    .nav a{
      color:rgba(255,255,255,.78);
      padding:7px 12px;
      border-radius:999px;
      border:1px solid transparent;
      transition:.15s ease;
      background:rgba(255,216,106,0.03);
    }
    .nav a:hover{
      border-color:rgba(255,216,106,.35);
      color:#fff;
    }
    .nav a.active{
      background:linear-gradient(135deg, var(--gold), var(--gold2));
      color:#000;
      font-weight:900;
      box-shadow:0 0 18px rgba(255,216,106,.35);
    }

    /* ===== Page ===== */
    .hero{padding:18px 0 8px}
    .hero h1{margin:0 0 6px;font-size:22px}
    .hero p{margin:0;color:var(--muted);font-size:13px;line-height:1.45;max-width:900px}

    .grid{
      display:grid;
      grid-template-columns:minmax(0,3.2fr) minmax(0,2.3fr);
      gap:18px;
      align-items:flex-start;
      padding:16px 0 40px;
    }
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{
      background:radial-gradient(circle at top left, #1a1a22, #05050a);
      border-radius:var(--radius-lg);
      padding:18px 16px 16px;
      border:1px solid rgba(255,255,255,.06);
      box-shadow:var(--shadow);
    }

    .card h2{margin:0 0 6px;font-size:18px}
    .sub{margin:0 0 12px;color:var(--muted);font-size:13px;line-height:1.4}

    .section-title{margin:14px 0 8px;font-size:14px;color:rgba(255,216,106,.95);letter-spacing:.4px}

    .row{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    @media (max-width:640px){.row{grid-template-columns:1fr}}

    label{display:block;font-size:12px;color:var(--muted);margin-bottom:4px}
    input,select{
      width:100%;
      padding:10px 10px;
      border-radius:var(--radius-sm);
      border:1px solid var(--border);
      background:rgba(9,11,18,.95);
      color:var(--text);
      font-size:14px;
      outline:none;
      transition:.16s ease;
    }
    input:focus,select:focus{
      border-color:rgba(255,216,106,.65);
      box-shadow:0 0 0 1px rgba(255,216,106,.25);
      background:#10121b;
    }
    .hint{margin-top:3px;font-size:11px;color:rgba(160,160,160,.92);line-height:1.35}

    .btn{
      width:100%;
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:11px 14px;
      border-radius:999px;
      border:1px solid rgba(255,216,106,.25);
      background:rgba(255,216,106,.06);
      color:var(--text);
      font-weight:900;
      font-size:13px;
      cursor:pointer;
      transition:.15s ease;
      margin-top:10px;
    }
    .btn:hover{border-color:rgba(255,216,106,.55);background:rgba(255,216,106,.10)}
    .btn:active{transform:translateY(1px)}

    .btn-primary{
      border:none;
      background:linear-gradient(135deg, var(--gold), var(--gold2));
      color:#000;
      box-shadow:0 12px 28px rgba(0,0,0,.75);
    }
    .btn-primary:hover{filter:brightness(1.03)}
    .btn-row{display:flex;gap:10px}
    @media (max-width:640px){.btn-row{flex-direction:column}}

    /* ===== Result ===== */
    .result-top{display:flex;justify-content:space-between;gap:12px;align-items:flex-start}
    .sum{
      font-size:26px;font-weight:1000;letter-spacing:.2px;
    }
    .uah{
      margin-top:3px;
      color:var(--ok);
      font-weight:900;
      font-size:13px;
    }
    .tag{
      font-size:11px;
      padding:3px 9px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      color:rgba(255,255,255,.70);
      white-space:nowrap;
    }
    .mini{margin-top:6px;color:var(--muted);font-size:11.5px;line-height:1.35}
    .block{margin-top:10px;padding-top:10px;border-top:1px dashed rgba(255,255,255,.10);font-size:13px}
    .r{display:flex;justify-content:space-between;gap:12px;margin:5px 0}
    .r span:first-child{color:rgba(255,255,255,.72)}
    .r span:last-child{font-variant-numeric:tabular-nums}
    .hl{margin-top:8px;padding-top:8px;border-top:1px solid rgba(255,216,106,.25);font-weight:1000}

    .pill{
      display:inline-flex;align-items:center;gap:6px;
      margin-top:10px;
      font-size:11px;
      padding:5px 10px;
      border-radius:999px;
      border:1px solid rgba(101,217,107,.32);
      background:rgba(101,217,107,.06);
      color:rgba(101,217,107,.95);
    }

    .status{margin-top:8px;font-size:11px;color:var(--muted);line-height:1.35}

    footer{
      border-top:1px solid rgba(255,255,255,.05);
      padding:14px 0 22px;
      text-align:center;
      color:var(--muted);
      font-size:11px;
    }
  </style>
</head>

<body>
  <!-- TOP HEADER (—è–∫ —Ä–∞–Ω—ñ—à–µ) -->
  <div class="top">
    <div class="container top-inner">
      <div class="brand">
        <div class="logo"><img src="logo-gbp.png" alt="Auto GBP"></div>
        <div>
          <div class="brand-title">AUTO GBP</div>
          <div class="brand-sub">Grand Best Performance ¬∑ Dubno</div>
        </div>
      </div>

      <div class="nav">
        <a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a>
        <a href="cars.html">–ê–≤—Ç–æ</a>
        <a class="active" href="calculator.html">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a>
        <a href="index.html#contact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
      </div>
    </div>
  </div>

  <main class="container">
    <section class="hero">
      <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–∞—Ä—Ç–æ—Å—Ç—ñ –∞–≤—Ç–æ</h1>
      <p>
        ‚úÖ –ü–æ VIN –ø—ñ–¥—Ç—è–≥—É—î–º–æ: <b>—Ä—ñ–∫ / –º–∞—Ä–∫–∞ / –º–æ–¥–µ–ª—å / –ø–∞–ª–∏–≤–æ / –æ–± º—î–º</b> (–±–µ–∑ —Ü—ñ–Ω–∏).
        <br>
        ‚úÖ –ë–∞–∑–∞ –¥–ª—è –º–∏—Ç–∞/–ü–î–í: <b>—Ü—ñ–Ω–∞ –∞–≤—Ç–æ + –∞—É–∫—Ü—ñ–æ–Ω–Ω—ñ –∑–±–æ—Ä–∏ + –ª–æ–≥—ñ—Å—Ç–∏–∫–∞ –¥–æ –ø—É–Ω–∫—Ç—É –ø—Ä–∏–±—É—Ç—Ç—è</b>.
        <br>
        ‚úÖ <b>–ü–æ—Ä—Ç–æ–≤—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –ù–ï –≤–∫–ª—é—á–∞—î–º–æ –≤ –º–∏—Ç–æ/–ü–î–í</b>. –ü–æ—Å–ª—É–≥–∏ Auto GBP —ñ –±–∞–Ω–∫—ñ–≤—Å—å–∫—ñ ‚Äî –æ–∫—Ä–µ–º–æ.
        <br>
        ‚Ç¥ –Ø–∫—â–æ –≤–≤–µ–¥–µ—à –∫—É—Ä—Å ‚Äî —É—Å—ñ —Å—É–º–∏ –ø–æ–∫–∞–∑—É—î–º–æ —ñ –≤ –≥—Ä–∏–≤–Ω—ñ.
      </p>
    </section>

    <section class="grid">
      <!-- LEFT -->
      <div class="card">
        <h2>–í–≤–µ–¥–∏ –¥–∞–Ω—ñ</h2>
        <p class="sub">
          –í—Å—Ç–∞–≤ –ª—ñ–Ω–∫ –Ω–∞ Copart/IAAI ‚Äî —Ä–æ–∑–ø—ñ–∑–Ω–∞—î–º–æ –∞—É–∫—Ü—ñ–æ–Ω —Ç–∞ ID. –í—Å—Ç–∞–≤ VIN ‚Äî –ø—ñ–¥—Ç—è–≥–Ω–µ–º–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.
        </p>

        <form id="calc-form" autocomplete="off">
          <div class="section-title">0) –õ–æ—Ç + VIN (–ø—ñ–¥—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫)</div>

          <div class="row">
            <div>
              <label for="auctionUrl">–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ª–æ—Ç (Copart/IAAI)</label>
              <input id="auctionUrl" name="auctionUrl" type="url" placeholder="https://www.iaai.com/.../VehicleDetail/44421501~US –∞–±–æ https://www.copart.com/lot/82324705" />
              <div class="hint">–õ—ñ–Ω–∫ –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è –∞—É–∫—Ü—ñ–æ–Ω—É/ID —ñ —â–æ–± –≤—ñ–Ω –±—É–≤ –≤ ‚Äú–ø–æ—Å–∏–ª–∞–Ω–Ω—ñ –Ω–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫‚Äù.</div>
            </div>
            <div>
              <label for="vin">VIN</label>
              <input id="vin" name="vin" type="text" placeholder="–ù–∞–ø—Ä.: 1FM5K8AR2JGA89957" />
              <div class="hint">–ü—ñ–¥—Ç—è–≥—É—î–º–æ —Ä—ñ–∫/–º–∞—Ä–∫—É/–º–æ–¥–µ–ª—å/–ø–∞–ª–∏–≤–æ/–æ–± º—î–º –ø–æ VIN.</div>
            </div>
          </div>

          <div class="btn-row">
            <button class="btn" type="button" id="recognizeLotBtn">üîé –†–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ –ª–æ—Ç</button>
            <button class="btn btn-primary" type="button" id="decodeVinBtn">‚ö° –ü—ñ–¥—Ç—è–≥–Ω—É—Ç–∏ –ø–æ VIN</button>
          </div>

          <div class="status" id="lotStatus"></div>
          <div class="status" id="vinStatus"></div>

          <div class="section-title">1) –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∞–≤—Ç–æ</div>

          <div class="row">
            <div>
              <label for="year">–†—ñ–∫ –≤–∏–ø—É—Å–∫—É</label>
              <input type="number" id="year" name="year" min="1995" max="2035" placeholder="2020" />
            </div>
            <div>
              <label for="fuel">–¢–∏–ø –ø–∞–ª–∏–≤–∞</label>
              <select id="fuel" name="fuel">
                <option value="gasoline">–ë–µ–Ω–∑–∏–Ω</option>
                <option value="diesel">–î–∏–∑–µ–ª—å</option>
                <option value="hybrid">–ì—ñ–±—Ä–∏–¥</option>
                <option value="electric">–ï–ª–µ–∫—Ç—Ä–æ</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="engine">–û–± º—î–º –¥–≤–∏–≥—É–Ω–∞, —Å–º¬≥</label>
              <input type="number" id="engine" name="engine" placeholder="2000" />
              <div class="hint">–î–ª—è –µ–ª–µ–∫—Ç—Ä–æ –º–æ–∂–Ω–∞ 0 ‚Äî –∞–∫—Ü–∏–∑ –±—É–¥–µ 0.</div>
            </div>
            <div>
              <label for="auction">–ê—É–∫—Ü—ñ–æ–Ω</label>
              <select id="auction" name="auction">
                <option value="Copart">Copart</option>
                <option value="IAAI">IAAI</option>
                <option value="Manheim">Manheim</option>
                <option value="other">–Ü–Ω—à–∏–π</option>
              </select>
            </div>
          </div>

          <div class="section-title">2) –í–∞—Ä—Ç—ñ—Å—Ç—å —Ç–∞ –ª–æ–≥—ñ—Å—Ç–∏–∫–∞</div>

          <div class="row">
            <div>
              <label for="lotPrice">Winning Bid (—Ü—ñ–Ω–∞ –≤–∏–≥—Ä–∞—à—É), $</label>
              <input type="number" id="lotPrice" name="lotPrice" placeholder="20000" />
              <div class="hint">–í—Ö–æ–¥–∏—Ç—å —É –±–∞–∑—É –º–∏—Ç–∞/–ü–î–í.</div>
            </div>
            <div>
              <label for="auctionFee">–ê—É–∫—Ü—ñ–æ–Ω–Ω—ñ –∑–±–æ—Ä–∏, $</label>
              <input type="number" id="auctionFee" name="auctionFee" placeholder="1200" />
              <div class="hint">–í—Ö–æ–¥–∏—Ç—å —É –±–∞–∑—É –º–∏—Ç–∞/–ü–î–í.</div>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="shipUsa">–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ —Å—É—à—ñ (–°–®–ê/–Ñ–° –¥–æ –ø–æ—Ä—Ç—É), $</label>
              <input type="number" id="shipUsa" name="shipUsa" placeholder="–¥–æ –ø–æ—Ä—Ç—É" />
              <div class="hint">–í—Ö–æ–¥–∏—Ç—å —É –±–∞–∑—É –º–∏—Ç–∞/–ü–î–í.</div>
            </div>
            <div>
              <label for="shipSea">–ú–æ—Ä—Å—å–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∞, $</label>
              <input type="number" id="shipSea" name="shipSea" placeholder="1350" />
              <div class="hint">–í—Ö–æ–¥–∏—Ç—å —É –±–∞–∑—É –º–∏—Ç–∞/–ü–î–í.</div>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="arrival">–ü–æ—Ä—Ç/–ø—É–Ω–∫—Ç –ø—Ä–∏–±—É—Ç—Ç—è</label>
              <select id="arrival" name="arrival">
                <option value="Klaipeda">–ö–ª–∞–π–ø–µ–¥–∞ (LT)</option>
                <option value="Gdansk">–ì–¥–∞–Ω—Å—å–∫ (PL)</option>
                <option value="Bremerhaven">–ë—Ä–µ–º–µ—Ä—Ö–∞—Ñ–µ–Ω (DE)</option>
                <option value="Rotterdam">–†–æ—Ç—Ç–µ—Ä–¥–∞–º (NL)</option>
                <option value="Chornomorsk">–ß–æ—Ä–Ω–æ–º–æ—Ä—Å—å–∫ (UA)</option>
                <option value="Other">–Ü–Ω—à–µ</option>
              </select>
            </div>
            <div>
              <label for="shipEuLand">–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –Ñ–≤—Ä–æ–ø—ñ (–¥–æ –ø—É–Ω–∫—Ç—É), $</label>
              <input type="number" id="shipEuLand" name="shipEuLand" placeholder="350" />
              <div class="hint">–í—Ö–æ–¥–∏—Ç—å —É –±–∞–∑—É –º–∏—Ç–∞/–ü–î–í.</div>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="portFees">–ü–æ—Ä—Ç–æ–≤—ñ/—Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏, $</label>
              <input type="number" id="portFees" name="portFees" placeholder="–µ–∫—Å–ø–µ–¥–∏—Ç–æ—Ä/—Ç–µ—Ä–º—ñ–Ω–∞–ª" />
              <div class="hint"><b>–ù–µ –≤—Ö–æ–¥—è—Ç—å</b> —É –º–∏—Ç–æ/–ü–î–í. –î–æ–¥–∞—é—Ç—å—Å—è –æ–∫—Ä–µ–º–æ –≤ –ø—ñ–¥—Å—É–º–æ–∫.</div>
            </div>
            <div>
              <label for="shipUa">–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ, $</label>
              <input type="number" id="shipUa" name="shipUa" placeholder="–¥–æ Dubno/—ñ–Ω—à–æ–≥–æ –º—ñ—Å—Ç–∞" />
            </div>
          </div>

          <div class="row">
            <div>
              <label for="dealerFee">–ü–æ—Å–ª—É–≥–∏ Auto GBP, $</label>
              <input type="number" id="dealerFee" name="dealerFee" placeholder="700" />
              <div class="hint">–ù–µ –≤—Ö–æ–¥–∏—Ç—å —É –º–∏—Ç–æ/–ü–î–í.</div>
            </div>
            <div>
              <label for="servicePackage">–ö–æ–º–ø–ª–µ–∫—Å –ø–æ—Å–ª—É–≥, $</label>
              <input type="number" id="servicePackage" name="servicePackage" placeholder="–æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è/–ª–æ–≥—ñ—Å—Ç–∏–∫–∞" />
              <div class="hint">–ù–µ –≤—Ö–æ–¥–∏—Ç—å —É –º–∏—Ç–æ/–ü–î–í.</div>
            </div>
          </div>

          <div class="section-title">3) –ü–æ–¥–∞—Ç–∫–∏ + —ñ–Ω—à–µ</div>

          <div class="row">
            <div>
              <label for="dutyRate">–ú–∏—Ç–æ, %</label>
              <input type="number" id="dutyRate" name="dutyRate" value="10" />
            </div>
            <div>
              <label for="vatRate">–ü–î–í, %</label>
              <input type="number" id="vatRate" name="vatRate" value="20" />
            </div>
          </div>

          <div class="row">
            <div>
              <label for="cert">–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è, $</label>
              <input type="number" id="cert" name="cert" placeholder="0" />
            </div>
            <div>
              <label for="reg">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è/–æ–±–ª—ñ–∫, $</label>
              <input type="number" id="reg" name="reg" placeholder="0" />
            </div>
          </div>

          <div class="row">
            <div>
              <label for="repair">–†–µ–º–æ–Ω—Ç, $</label>
              <input type="number" id="repair" name="repair" placeholder="0" />
            </div>
            <div>
              <label for="insurance">–°—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è, $</label>
              <input type="number" id="insurance" name="insurance" placeholder="0" />
            </div>
          </div>

          <div class="row">
            <div>
              <label for="other">–Ü–Ω—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏, $</label>
              <input type="number" id="other" name="other" placeholder="–¥—Ä—ñ–±–Ω—ñ –ø–ª–∞—Ç–µ–∂—ñ" />
            </div>
            <div>
              <label for="usdToUah">–ö—É—Ä—Å $ ‚Üí –≥—Ä–Ω</label>
              <input type="number" id="usdToUah" name="usdToUah" step="0.01" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 42" />
              <div class="hint">–Ø–∫—â–æ –≤–≤–µ–¥–µ—à –∫—É—Ä—Å ‚Äî –ø–æ–∫–∞–∂–µ–º–æ –≥—Ä–Ω —É –∫–æ–∂–Ω–æ–º—É —Ä—è–¥–∫—É.</div>
            </div>
          </div>

          <div class="section-title">4) –ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ/–¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ñ (–æ–∫—Ä–µ–º–æ –≤—ñ–¥ –º–∏—Ç–∞)</div>

          <div class="row">
            <div>
              <label for="swiftFee">SWIFT, $</label>
              <input type="number" id="swiftFee" name="swiftFee" value="200" />
            </div>
            <div>
              <label for="payDocsFee">–ü–ª–∞—Ç—ñ–∂–∫–∏, $</label>
              <input type="number" id="payDocsFee" name="payDocsFee" value="95" />
            </div>
          </div>

          <div class="row">
            <div>
              <label for="transferLtFee">–ü–µ—Ä–µ–∫–∞–∑ –∫–æ—à—Ç—ñ–≤ –≤ –õ–∏—Ç–≤—É, $</label>
              <input type="number" id="transferLtFee" name="transferLtFee" value="85" />
            </div>
            <div>
              <label for="legalEntityFee">–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —é—Ä.–æ—Å–æ–±—É, $</label>
              <input type="number" id="legalEntityFee" name="legalEntityFee" value="250" />
            </div>
          </div>

          <div class="btn-row">
            <button class="btn btn-primary" type="button" id="copyLinkBtn">üîó –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫</button>
            <button class="btn" type="button" id="copyTextBtn">üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ç–µ–∫—Å—Ç–æ–º</button>
          </div>

          <div class="status" id="copyStatus"></div>
        </form>
      </div>

      <!-- RIGHT -->
      <aside class="card" id="result-card">
        <div class="result-top">
          <div>
            <div class="sum" id="totalUsd">0 $</div>
            <div class="uah" id="totalUah"></div>
            <div class="mini" id="routeLine"></div>
            <div class="mini" id="lotLine"></div>
            <div class="mini" id="vinLine"></div>
          </div>
          <div class="tag">–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∞ –ø–æ–≤–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å</div>
        </div>

        <div class="block">
          <div class="r"><span>–ë–∞–∑–∞ –¥–ª—è –º–∏—Ç–∞/–ü–î–í</span><span id="customsBase">0 $</span></div>
          <div class="r"><span>–ú–∏—Ç–æ</span><span id="duty">0 $</span></div>
          <div class="r"><span>–ê–∫—Ü–∏–∑ (–æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ)</span><span id="excise">0 $</span></div>
          <div class="r"><span>–ü–î–í</span><span id="vat">0 $</span></div>
          <div class="r hl"><span>–ü–æ–¥–∞—Ç–∫–∏ —Ä–∞–∑–æ–º</span><span id="taxesTotal">0 $</span></div>

          <div class="r"><span>–ü–æ—Ä—Ç–æ–≤—ñ/—Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ</span><span id="portOnly">0 $</span></div>
          <div class="r"><span>–ü–æ—Å–ª—É–≥–∏ Auto GBP</span><span id="gbpServices">0 $</span></div>
          <div class="r"><span>–ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø–ª–∞—Ç–µ–∂—ñ</span><span id="bankFees">0 $</span></div>
          <div class="r"><span>–£–∫—Ä–∞—ó–Ω–∞ + —Å–µ—Ä—Ç/–æ–±–ª—ñ–∫/—Ä–µ–º–æ–Ω—Ç/—ñ–Ω—à–µ</span><span id="extras">0 $</span></div>

          <div class="r hl"><span>–†–∞–∑–æ–º ¬´–ø—ñ–¥ –∫–ª—é—á¬ª</span><span id="grandTotal">0 $</span></div>

          <div class="pill">‚úÖ –ê–≤—Ç–æ–ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ —É–≤—ñ–º–∫–Ω–µ–Ω–æ</div>
        </div>
      </aside>
    </section>
  </main>

  <footer>¬© Grand Best Performance ¬∑ Auto GBP</footer>

  <script>
    const form = document.getElementById("calc-form");

    const el = {
      lotStatus: document.getElementById("lotStatus"),
      vinStatus: document.getElementById("vinStatus"),
      copyStatus: document.getElementById("copyStatus"),

      totalUsd: document.getElementById("totalUsd"),
      totalUah: document.getElementById("totalUah"),
      routeLine: document.getElementById("routeLine"),
      lotLine: document.getElementById("lotLine"),
      vinLine: document.getElementById("vinLine"),

      customsBase: document.getElementById("customsBase"),
      duty: document.getElementById("duty"),
      excise: document.getElementById("excise"),
      vat: document.getElementById("vat"),
      taxesTotal: document.getElementById("taxesTotal"),

      portOnly: document.getElementById("portOnly"),
      gbpServices: document.getElementById("gbpServices"),
      bankFees: document.getElementById("bankFees"),
      extras: document.getElementById("extras"),
      grandTotal: document.getElementById("grandTotal"),
    };

    const currentYear = new Date().getFullYear();

    const PARAMS = [
      "auctionUrl","vin","year","fuel","engine","auction",
      "lotPrice","auctionFee","shipUsa","shipSea","arrival","shipEuLand",
      "portFees","shipUa","dealerFee","servicePackage",
      "dutyRate","vatRate","cert","reg","repair","insurance","other",
      "usdToUah",
      "swiftFee","payDocsFee","transferLtFee","legalEntityFee"
    ];

    function num(v){
      if (v === null || v === undefined || v === "") return 0;
      const n = parseFloat(String(v).replace(",", "."));
      return Number.isFinite(n) ? n : 0;
    }

    function fmt(n){
      return (Number(n) || 0).toLocaleString("uk-UA",{maximumFractionDigits:0});
    }

    function money(usd){
      const rate = num(form.usdToUah.value);
      const usdTxt = fmt(usd) + " $";
      if (rate > 0) return usdTxt + " ¬∑ " + fmt(usd * rate) + " –≥—Ä–Ω";
      return usdTxt;
    }

    function parseAuctionUrl(url){
      try{
        const u = new URL(url);
        const host = u.hostname.toLowerCase();
        const path = (u.pathname || "").toLowerCase();

        if (host.includes("copart.com")){
          const m = path.match(/\/lot\/(\d+)/i);
          if (m) return { auction:"Copart", id:m[1] };
          const q = u.searchParams.get("lotid") || u.searchParams.get("lotId");
          if (q) return { auction:"Copart", id:q };
        }

        if (host.includes("iaai.com")){
          const m = path.match(/\/vehicledetail\/(\d+)/i);
          if (m) return { auction:"IAAI", id:m[1] };
          const q = u.searchParams.get("vehicleid") || u.searchParams.get("id");
          if (q) return { auction:"IAAI", id:q };
        }

        return null;
      } catch(e){
        return null;
      }
    }

    function applyLot(){
      const url = (form.auctionUrl.value || "").trim();
      if (!url){
        el.lotStatus.textContent = "";
        el.lotLine.textContent = "";
        return null;
      }
      const info = parseAuctionUrl(url);
      if (!info){
        el.lotStatus.textContent = "–ù–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤ –ø–æ—Å–∏–ª–∞–Ω–Ω—è. –ü–µ—Ä–µ–≤—ñ—Ä Copart/IAAI –ª—ñ–Ω–∫.";
        el.lotLine.textContent = "";
        return null;
      }
      form.auction.value = info.auction;
      el.lotStatus.textContent = `–†–æ–∑–ø—ñ–∑–Ω–∞–Ω–æ: ${info.auction} ‚Ä¢ ID: ${info.id}`;
      el.lotLine.textContent = `${info.auction} ‚Ä¢ ID: ${info.id}`;
      return info;
    }

    function calcExcise(fuel, engine, age){
      let baseRate;
      if (fuel === "gasoline") baseRate = 50;
      else if (fuel === "diesel") baseRate = 75;
      else if (fuel === "hybrid") baseRate = 25;
      else baseRate = 0;

      if (baseRate <= 0 || engine <= 0) return 0;
      return (engine / 1000) * baseRate * age;
    }

    function recalc(){
      const year = parseInt(form.year.value,10) || currentYear;
      const fuel = form.fuel.value;
      const engine = num(form.engine.value);
      const age = Math.max(1, currentYear - year);

      const lotPrice = num(form.lotPrice.value);
      const auctionFee = num(form.auctionFee.value);

      // –ë–ê–ó–ê –ú–ò–¢–ê/–ü–î–í: —Ü—ñ–Ω–∞ + –∞—É–∫—Ü—ñ–æ–Ω–Ω—ñ + –ª–æ–≥—ñ—Å—Ç–∏–∫–∞ –¥–æ –ø—Ä–∏–±—É—Ç—Ç—è (—Å—É—à–∞+–º–æ—Ä–µ+–Ñ–° —Å—É—à–∞)
      const shipUsa = num(form.shipUsa.value);
      const shipSea = num(form.shipSea.value);
      const shipEuLand = num(form.shipEuLand.value);

      // –ü–æ—Ä—Ç–æ–≤—ñ –ù–ï –≤—Ö–æ–¥—è—Ç—å —É –º–∏—Ç–æ/–ü–î–í
      const portFees = num(form.portFees.value);

      const dutyRate = num(form.dutyRate.value || 10);
      const vatRate  = num(form.vatRate.value || 20);

      // –ü–æ—Å–ª—É–≥–∏ GBP –æ–∫—Ä–µ–º–æ
      const gbpServices = num(form.dealerFee.value) + num(form.servicePackage.value);

      // –ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –æ–∫—Ä–µ–º–æ
      const bankFees = num(form.swiftFee.value) + num(form.payDocsFee.value) + num(form.transferLtFee.value) + num(form.legalEntityFee.value);

      // –Ü–Ω—à–µ
      const extras = num(form.shipUa.value) + num(form.cert.value) + num(form.reg.value) + num(form.repair.value) + num(form.insurance.value) + num(form.other.value);

      const customsBase = lotPrice + auctionFee + shipUsa + shipSea + shipEuLand;

      const excise = calcExcise(fuel, engine, age);
      const duty = (customsBase * dutyRate) / 100;
      const vat  = ((customsBase + duty + excise) * vatRate) / 100;
      const taxesTotal = duty + vat + excise;

      const total = customsBase + taxesTotal + portFees + gbpServices + bankFees + extras;

      el.customsBase.textContent = money(customsBase);
      el.duty.textContent = money(duty);
      el.excise.textContent = money(excise);
      el.vat.textContent = money(vat);
      el.taxesTotal.textContent = money(taxesTotal);

      el.portOnly.textContent = money(portFees);
      el.gbpServices.textContent = money(gbpServices);
      el.bankFees.textContent = money(bankFees);
      el.extras.textContent = money(extras);

      el.grandTotal.textContent = money(total);
      el.totalUsd.textContent = fmt(total) + " $";

      const rate = num(form.usdToUah.value);
      el.totalUah.textContent = rate > 0 ? ("‚âà " + fmt(total * rate) + " –≥—Ä–Ω (–∫—É—Ä—Å " + rate.toFixed(2) + ")") : "";

      const arrivalText = form.arrival.options[form.arrival.selectedIndex]?.text || "";
      el.routeLine.textContent = `–ú–∞—Ä—à—Ä—É—Ç: –°–®–ê/–Ñ–° ‚Üí –º–æ—Ä–µ ‚Üí ${arrivalText}`;

      const vin = (form.vin.value || "").trim().toUpperCase();
      el.vinLine.textContent = vin ? ("VIN: " + vin) : "";
    }

    function buildShareUrl(){
      const u = new URL(window.location.origin + window.location.pathname);
      const sp = new URLSearchParams();
      PARAMS.forEach(k=>{
        const field = form.elements[k];
        if (!field) return;
        const v = (field.value ?? "").toString().trim();
        if (v !== "") sp.set(k, v);
      });
      u.search = sp.toString();
      return u.toString();
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        return true;
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.style.position="fixed";
        ta.style.left="-9999px";
        document.body.appendChild(ta);
        ta.select();
        try{
          document.execCommand("copy");
          document.body.removeChild(ta);
          return true;
        }catch(err){
          document.body.removeChild(ta);
          return false;
        }
      }
    }

    function summaryText(){
      const lines = [
        "Auto GBP ‚Äî –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ (–æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ)",
        "----------------------------------",
        el.lotLine.textContent ? ("–õ–æ—Ç: " + el.lotLine.textContent) : "",
        el.vinLine.textContent ? el.vinLine.textContent : "",
        el.routeLine.textContent || "",
        "",
        "–ë–ê–ó–ê –î–õ–Ø –ú–ò–¢–ê/–ü–î–í: " + el.customsBase.textContent,
        "–ú–∏—Ç–æ: " + el.duty.textContent,
        "–ê–∫—Ü–∏–∑: " + el.excise.textContent,
        "–ü–î–í: " + el.vat.textContent,
        "–ü–æ–¥–∞—Ç–∫–∏ —Ä–∞–∑–æ–º: " + el.taxesTotal.textContent,
        "",
        "–ü–æ—Ä—Ç–æ–≤—ñ/—Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ: " + el.portOnly.textContent + " (–Ω–µ –≤—Ö–æ–¥–∏—Ç—å —É –º–∏—Ç–æ/–ü–î–í)",
        "–ü–æ—Å–ª—É–≥–∏ Auto GBP: " + el.gbpServices.textContent + " (–æ–∫—Ä–µ–º–æ)",
        "–ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø–ª–∞—Ç–µ–∂—ñ: " + el.bankFees.textContent + " (–æ–∫—Ä–µ–º–æ)",
        "–£–∫—Ä–∞—ó–Ω–∞ + —Å–µ—Ä—Ç/–æ–±–ª—ñ–∫/—Ä–µ–º–æ–Ω—Ç/—ñ–Ω—à–µ: " + el.extras.textContent,
        "",
        "–†–ê–ó–û–ú –ü–Ü–î –ö–õ–Æ–ß: " + el.grandTotal.textContent,
        el.totalUah.textContent ? el.totalUah.textContent : "",
        "",
        "–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫:",
        buildShareUrl()
      ];
      return lines.filter(Boolean).join("\n");
    }

    function loadFromParams(){
      const sp = new URLSearchParams(window.location.search);
      if ([...sp.keys()].length === 0) return;
      PARAMS.forEach(k=>{
        const v = sp.get(k);
        const field = form.elements[k];
        if (v !== null && field) field.value = v;
      });
    }

    async function decodeVin(){
      const raw = (form.vin.value || "").trim().toUpperCase();
      const vin = raw.replace(/[^A-Z0-9]/g, "");
      form.vin.value = vin;

      if (!vin || vin.length < 11){
        el.vinStatus.textContent = "–í–≤–µ–¥–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π VIN (–º—ñ–Ω—ñ–º—É–º 11 —Å–∏–º–≤–æ–ª—ñ–≤).";
        return;
      }

      el.vinStatus.textContent = "–ü—ñ–¥—Ç—è–≥—É—î–º–æ –¥–∞–Ω—ñ –ø–æ VIN‚Ä¶";

      try{
        const url = "https://vpic.nhtsa.dot.gov/api/vehicles/DecodeVinValuesExtended/" + encodeURIComponent(vin) + "?format=json";
        const res = await fetch(url, { cache: "no-store" });
        const data = await res.json();

        const row = data?.Results?.[0];
        if (!row){
          el.vinStatus.textContent = "–ù–µ –æ—Ç—Ä–∏–º–∞–≤ –¥–∞–Ω—ñ –ø–æ VIN.";
          return;
        }

        // year / make / model
        const y = parseInt(row.ModelYear, 10);
        if (y) form.year.value = y;

        // fuel mapping
        const fuelRaw = (row.FuelTypePrimary || row.FuelTypeSecondary || "").toLowerCase();
        const engineDisp = (row.DisplacementCC || row.DisplacementL || "").toString();

        if (fuelRaw.includes("diesel")) form.fuel.value = "diesel";
        else if (fuelRaw.includes("electric")) form.fuel.value = "electric";
        else if (fuelRaw.includes("hybrid")) form.fuel.value = "hybrid";
        else if (fuelRaw) form.fuel.value = "gasoline";

        // engine cc
        const cc = parseInt(row.DisplacementCC, 10);
        if (cc) form.engine.value = cc;

        // if only liters exist
        if (!cc && row.DisplacementL){
          const l = num(row.DisplacementL);
          if (l > 0) form.engine.value = Math.round(l * 1000);
        }

        el.vinStatus.textContent =
          "–ü—ñ–¥—Ç—è–≥–Ω—É—Ç–æ –ø–æ VIN ‚úÖ " +
          (row.ModelYear ? (row.ModelYear + " ") : "") +
          (row.Make ? (row.Make + " ") : "") +
          (row.Model ? (row.Model) : "");

        recalc();
      }catch(e){
        el.vinStatus.textContent = "–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥—Ç—è–≥—É–≤–∞–Ω–Ω—è VIN. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑.";
      }
    }

    // events
    form.querySelectorAll("input,select").forEach(x=>{
      x.addEventListener("input", recalc);
      x.addEventListener("change", recalc);
    });

    document.getElementById("recognizeLotBtn").addEventListener("click", ()=>{
      applyLot();
      recalc();
    });

    document.getElementById("decodeVinBtn").addEventListener("click", decodeVin);

    document.getElementById("copyLinkBtn").addEventListener("click", async ()=>{
      applyLot();
      recalc();
      const ok = await copyText(buildShareUrl());
      el.copyStatus.textContent = ok ? "–ü–æ—Å–∏–ª–∞–Ω–Ω—è —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ ‚úÖ" : "–ù–µ –≤–¥–∞–ª–æ—Å—å —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è";
      setTimeout(()=>el.copyStatus.textContent="", 2200);
    });

    document.getElementById("copyTextBtn").addEventListener("click", async ()=>{
      applyLot();
      recalc();
      const ok = await copyText(summaryText());
      el.copyStatus.textContent = ok ? "–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ ‚úÖ" : "–ù–µ –≤–¥–∞–ª–æ—Å—å —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏";
      setTimeout(()=>el.copyStatus.textContent="", 2200);
    });

    // init
    loadFromParams();
    applyLot();
    recalc();
  </script>
</body>
</html>
