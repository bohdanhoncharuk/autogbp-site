<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Auto GBP ‚Äî –ê–≤—Ç–æ–º–æ–±—ñ–ª—ñ</title>

  <style>
    :root{
      --bg:#070a0f;
      --panel:#0c111a;
      --panel2:#0a0f17;
      --stroke:rgba(255,216,74,.14);
      --stroke2:rgba(255,255,255,.06);
      --gold:#ffd84a;
      --gold2:#b38a2e;
      --text:#e9eef7;
      --muted:#a8b4c6;
      --green:#1dbf73;
      --shadow: 0 18px 70px rgba(0,0,0,.55);
      --r:18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(255,216,74,.10), transparent 55%),
        radial-gradient(800px 500px at 90% 30%, rgba(179,138,46,.10), transparent 60%),
        radial-gradient(900px 700px at 50% 90%, rgba(255,216,74,.06), transparent 55%),
        var(--bg);
    }

    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:18px 14px 60px}

    /* Top bar */
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px; padding:10px 12px;
      border:1px solid var(--stroke2);
      background:linear-gradient(180deg, rgba(12,17,26,.86), rgba(8,12,18,.70));
      border-radius:22px;
      box-shadow: var(--shadow);
      position:sticky; top:10px; z-index:5;
      backdrop-filter: blur(10px);
    }
    .brand{
      display:flex;align-items:center;gap:10px;min-width:160px;
    }
    .logo{
      width:40px;height:40px;border-radius:12px;
      border:1px solid var(--stroke);
      background: radial-gradient(circle at 30% 30%, rgba(255,216,74,.35), rgba(179,138,46,.12) 55%, rgba(0,0,0,.25) 100%);
      box-shadow: 0 10px 30px rgba(0,0,0,.45);
    }
    .brand b{letter-spacing:.4px}
    .brand small{display:block;color:var(--muted);margin-top:1px}

    .top-actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:11px 14px;
      border-radius:16px;
      border:1px solid var(--stroke2);
      background: rgba(10,15,23,.65);
      color:var(--text);
      font-weight:650;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      transition:.15s transform ease, .15s opacity ease, .15s border-color ease;
      white-space:nowrap;
    }
    .btn:hover{transform:translateY(-1px); border-color:rgba(255,216,74,.22)}
    .btn.gold{
      border-color:rgba(255,216,74,.22);
      background: linear-gradient(180deg, rgba(255,216,74,.14), rgba(179,138,46,.10));
    }
    .btn.dark{
      background: rgba(10,15,23,.55);
    }

    /* Filters */
    .filters{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1.1fr .9fr .7fr .7fr auto;
      gap:10px;
      align-items:stretch;
    }
    .field{
      border-radius:16px;
      border:1px solid var(--stroke2);
      background:rgba(10,15,23,.55);
      padding:10px 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .field label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    .field input,.field select{
      width:100%;
      border:0; outline:0;
      color:var(--text);
      background:transparent;
      font-size:15px;
    }
    .filters .btn{height:100%}

    /* Stats */
    .stats{
      margin-top:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:10px 2px;
      color:var(--muted);
    }
    .stats b{color:var(--gold)}

    /* Grid */
    .grid{
      margin-top:10px;
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:14px;
    }
    @media (max-width:860px){
      .filters{grid-template-columns:1fr 1fr; }
      .grid{grid-template-columns:1fr;}
      .brand{min-width:auto}
    }

    .card{
      border-radius:24px;
      overflow:hidden;
      border:1px solid var(--stroke2);
      background: linear-gradient(180deg, rgba(12,17,26,.78), rgba(8,12,18,.62));
      box-shadow: var(--shadow);
    }

    .cover{
      position:relative;
      height:220px;
      background: radial-gradient(circle at 30% 30%, rgba(255,216,74,.10), rgba(0,0,0,.25) 60%),
                  linear-gradient(135deg, rgba(255,216,74,.08), rgba(0,0,0,.0));
      border-bottom:1px solid rgba(255,255,255,.06);
      overflow:hidden;
    }
    .cover img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      filter:saturate(1.05) contrast(1.05);
      transform:scale(1.01);
    }
    .badges{
      position:absolute; left:12px; bottom:12px;
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .badge{
      display:inline-flex; align-items:center; justify-content:center;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(10,15,23,.55);
      color:var(--text);
      font-size:12px;
      font-weight:650;
      backdrop-filter: blur(10px);
    }
    .badge.gold{
      border-color: rgba(255,216,74,.22);
      background: linear-gradient(180deg, rgba(255,216,74,.16), rgba(179,138,46,.10));
    }
    .badge.green{
      border-color: rgba(29,191,115,.25);
      background: rgba(29,191,115,.12);
      color:#d7ffea;
    }
    .flag{
      position:absolute; right:12px; bottom:12px;
      width:54px; height:54px;
      border-radius:18px;
      border:1px solid rgba(255,216,74,.20);
      background: rgba(10,15,23,.55);
      display:flex; align-items:center; justify-content:center;
      font-weight:800;
      color:var(--gold);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
    }

    .content{padding:14px 14px 16px}
    .title-row{display:flex;justify-content:space-between;align-items:flex-start;gap:12px}
    .title-row h3{margin:0;font-size:20px;line-height:1.2}
    .subtitle{margin:8px 0 12px;color:var(--muted);font-weight:560}

    .specs{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-bottom:12px;
    }
    .spec{
      border-radius:16px;
      border:1px solid rgba(255,255,255,.06);
      background: rgba(10,15,23,.45);
      padding:12px 12px;
    }
    .spec span{display:block;color:var(--muted);font-size:12px;margin-bottom:6px}
    .spec b{font-size:15px}

    .price-row{
      display:flex; align-items:flex-end; justify-content:space-between; gap:10px;
      margin-top:10px;
    }
    .price{
      font-size:26px;
      font-weight:900;
      color:var(--gold);
      letter-spacing:.2px;
    }
    .price small{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin-top:2px;
      font-weight:650;
    }
    .card-actions{display:flex;gap:10px}
    .smallbtn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(10,15,23,.55);
      font-weight:800;
      cursor:pointer;
      white-space:nowrap;
    }
    .smallbtn.gold{
      border-color: rgba(255,216,74,.20);
      background: linear-gradient(180deg, rgba(255,216,74,.14), rgba(179,138,46,.10));
    }

    /* Modal */
    .modal{
      position:fixed; inset:0;
      background: rgba(0,0,0,.70);
      display:none;
      align-items:center; justify-content:center;
      padding:18px 12px;
      z-index:50;
    }
    .modal.open{display:flex}
    .mcard{
      width:min(980px, 100%);
      border-radius:24px;
      border:1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(12,17,26,.92), rgba(8,12,18,.86));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .mhead{
      display:flex; justify-content:space-between; align-items:center;
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .mhead b{color:var(--gold)}
    .xbtn{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(10,15,23,.55);
      color:var(--text);
      border-radius:14px;
      padding:8px 10px;
      font-weight:900;
      cursor:pointer;
    }
    .mbody{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:0;
    }
    @media (max-width:860px){
      .mbody{grid-template-columns:1fr}
    }
    .gallery{
      border-right:1px solid rgba(255,255,255,.06);
      padding:14px;
    }
    @media (max-width:860px){
      .gallery{border-right:0;border-bottom:1px solid rgba(255,255,255,.06)}
    }
    .mainimg{
      width:100%;
      aspect-ratio: 16/10;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(10,15,23,.55);
    }
    .mainimg img{width:100%;height:100%;object-fit:cover;display:block}
    .thumbs{
      margin-top:10px;
      display:flex;
      gap:8px;
      overflow:auto;
      padding-bottom:6px;
    }
    .thumb{
      width:84px;height:60px;
      border-radius:14px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(10,15,23,.55);
      flex:0 0 auto;
      cursor:pointer;
      opacity:.85;
    }
    .thumb.active{border-color: rgba(255,216,74,.30); opacity:1}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}

    .minfo{padding:14px}
    .minfo h2{margin:0 0 8px;font-size:22px}
    .minfo .muted{color:var(--muted);font-weight:650;margin-bottom:12px}

    .minfo .specs{grid-template-columns:1fr 1fr}
    .minfo .desc{
      border:1px solid rgba(255,255,255,.06);
      background: rgba(10,15,23,.45);
      border-radius:16px;
      padding:12px;
      color:var(--text);
      line-height:1.35;
    }
    .macts{
      margin-top:12px;
      display:flex; gap:10px; flex-wrap:wrap;
    }

    .footnote{
      margin-top:18px;
      color:var(--muted);
      font-size:12px;
      opacity:.9;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <b>Auto GBP</b>
          <small>–ê–≤—Ç–æ–º–æ–±—ñ–ª—ñ ‚Ä¢ –ø—ñ–¥–±—ñ—Ä ‚Ä¢ –¥–æ—Å—Ç–∞–≤–∫–∞</small>
        </div>
      </div>

      <div class="top-actions">
        <a class="btn gold" href="calculator.html">üßÆ –ü—Ä–æ—Ä–∞—Ö—É–≤–∞—Ç–∏</a>
        <a class="btn dark" id="writeTop" target="_blank" rel="noopener">üìù –ó–∞—è–≤–∫–∞</a>
      </div>
    </div>

    <div class="filters">
      <div class="field">
        <label>–ü–æ—à—É–∫</label>
        <input id="q" placeholder="Ford, Edge, Explorer..." />
      </div>

      <div class="field">
        <label>–°—Ç–∞—Ç—É—Å</label>
        <select id="status">
          <option value="">–í—Å—ñ</option>
          <option value="in">–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</option>
          <option value="order">–í –¥–æ—Ä–æ–∑—ñ / –ø—ñ–¥ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</option>
          <option value="sold">–ü—Ä–æ–¥–∞–Ω–æ</option>
        </select>
      </div>

      <div class="field">
        <label>–†—ñ–∫ –≤—ñ–¥</label>
        <input id="yearMin" inputmode="numeric" placeholder="2016" />
      </div>

      <div class="field">
        <label>–¶—ñ–Ω–∞ –¥–æ ($)</label>
        <input id="priceMax" inputmode="numeric" placeholder="20000" />
      </div>

      <button class="btn gold" id="apply">‚úÖ –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏</button>
      <button class="btn" id="reset">‚Ü©Ô∏è –°–∫–∏–Ω—É—Ç–∏</button>
    </div>

    <div class="stats">
      <div id="counter">–ü–æ–∫–∞–∑–∞–Ω–æ: 0</div>
      <div>–í—Å—å–æ–≥–æ: <b id="statTotal">0</b></div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="footnote">
      –ü–æ—Ä–∞–¥–∞: —Ñ–æ—Ç–æ –±–µ—Ä–µ—Ç—å—Å—è –∑ –ø–µ—Ä—à–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ <b>photos[0]</b>. –ì–∞–ª–µ—Ä–µ—è –≤ ‚Äú–î–µ—Ç–∞–ª—ñ‚Äù –ø–æ–∫–∞–∑—É—î –≤—Å—ñ —Ñ–æ—Ç–æ –∑ –º–∞—Å–∏–≤—É <b>photos</b>.
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="mcard">
      <div class="mhead">
        <div><b>Auto GBP</b> ‚Ä¢ –î–µ—Ç–∞–ª—ñ –∞–≤—Ç–æ</div>
        <button class="xbtn" id="mClose">‚úï</button>
      </div>

      <div class="mbody">
        <div class="gallery">
          <div class="mainimg"><img id="mImg" alt=""></div>
          <div class="thumbs" id="thumbs"></div>
        </div>

        <div class="minfo">
          <h2 id="mTitle">‚Äî</h2>
          <div class="muted" id="mNote">‚Äî</div>

          <div class="specs">
            <div class="spec"><span>–ö—É–∑–æ–≤</span><b id="mBody">‚Äî</b></div>
            <div class="spec"><span>–ü—Ä–∏–≤—ñ–¥</span><b id="mDrive">‚Äî</b></div>
            <div class="spec"><span>–î–≤–∏–≥—É–Ω</span><b id="mEngine">‚Äî</b></div>
            <div class="spec"><span>–õ–æ–∫–∞—Ü—ñ—è</span><b id="mLoc">‚Äî</b></div>
            <div class="spec"><span>–†—ñ–∫</span><b id="mYear">‚Äî</b></div>
            <div class="spec"><span>–ü—Ä–æ–±—ñ–≥</span><b id="mMileage">‚Äî</b></div>
          </div>

          <div class="desc" id="mDesc">‚Äî</div>

          <div class="macts">
            <div class="price" id="mPrice">$0<small>–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ</small></div>
            <a class="smallbtn gold" id="mWrite" target="_blank" rel="noopener">üìù –ó–∞—è–≤–∫–∞</a>
            <button class="smallbtn" id="mCopy">üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ "–ó–∞—è–≤–∫–∞" (–º–æ–∂–µ—à –∑–º—ñ–Ω–∏—Ç–∏)
    const TELEGRAM_USERNAME = "AutoGBPBot"; // –±–µ–∑ @
    function writeLink(text){
      // –ø—Ä–æ—Å—Ç–∏–π —Å—Ç–∞—Ä—Ç-–ø–∞—Ä–∞–º–µ—Ç—Ä (–ø—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ)
      return `https://t.me/${TELEGRAM_USERNAME}?start=${encodeURIComponent("cars")}`;
      // –Ø–∫—â–æ —Ö–æ—á–µ—à —Ç–µ–∫—Å—Ç–æ–º (—ñ–Ω–∫–æ–ª–∏ –Ω–µ —É –≤—Å—ñ—Ö –∫–ª—ñ—î–Ω—Ç–∞—Ö):
      // return `https://t.me/${TELEGRAM_USERNAME}?text=${encodeURIComponent(text)}`;
    }
    document.getElementById("writeTop").href = writeLink("–ü—Ä–∏–≤—ñ—Ç! –•–æ—á—É –∞–≤—Ç–æ.");

    // ===== –î–ê–ù–Ü (—Ç—É—Ç —Ñ–æ—Ç–æ –≤–∂–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ)
    const CARS = [
      {
        id:"edge2020",
        title:"Ford Edge SEL",
        year:2020,
        note:"–ö–æ–º—Ñ–æ—Ä—Ç–Ω–∏–π –∫—Ä–æ—Å–æ–≤–µ—Ä –¥–ª—è –º—ñ—Å—Ç–∞ —Ç–∞ —Ç—Ä–∞—Å–∏",
        origin:"USA",
        status:"in",          // in / order / sold
        body:"SUV",
        drive:"AWD",
        engine:"2.0 EcoBoost",
        mileage:"105k km",
        location:"–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ",
        price:15700,
        tags:["–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ","–ö–æ–º—Ñ–æ—Ä—Ç"],
        photos:[
          "assets/cars/edge2020/IMG_5005.jpeg",
          "assets/cars/edge2020/IMG_5006.jpeg",
          "assets/cars/edge2020/IMG_5008.jpeg",
          "assets/cars/edge2020/IMG_5010.jpeg",
          "assets/cars/edge2020/IMG_5012.jpeg"
        ],
        desc:"–î–æ–≥–ª—è–Ω—É—Ç–∏–π —Å—Ç–∞–Ω. –£—Ç–æ—á–Ω—é–π –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü—ñ—é —Ç–∞ –¥–µ—Ç–∞–ª—ñ –≤ –∑–∞—è–≤—Ü—ñ."
      },
      {
        id:"explorer2018",
        title:"Ford Explorer",
        year:2018,
        note:"–°—ñ–º–µ–π–Ω–∏–π 7-–º—ñ—Å–Ω–∏–π, –≤–µ–ª–∏–∫–∏–π –±–∞–≥–∞–∂–Ω–∏–∫",
        origin:"USA",
        status:"order",
        body:"SUV",
        drive:"AWD",
        engine:"3.7",
        mileage:"140k km",
        location:"–í –¥–æ—Ä–æ–∑—ñ",
        price:17500,
        tags:["–ü—ñ–¥–±—ñ—Ä","–°—ñ–º º—è","–ü–æ–¥–æ—Ä–æ–∂"],
        photos:[
          "assets/cars/explorer2018/IMG_5682.jpeg",
          "assets/cars/explorer2018/IMG_5683.jpeg",
          "assets/cars/explorer2018/IMG_5684.jpeg",
          "assets/cars/explorer2018/IMG_5685.jpeg",
          "assets/cars/explorer2018/IMG_5686.jpeg"
        ],
        desc:"–ü—ñ–¥ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è / –≤ –¥–æ—Ä–æ–∑—ñ. –ù–∞–ø–∏—à–∏ ‚Äî –ø—ñ–¥–∫–∞–∂—É –ø–æ —Ç–µ—Ä–º—ñ–Ω–∞—Ö —ñ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü—ñ—ó."
      }
    ];

    // ===== Helpers
    const $ = (id)=>document.getElementById(id);
    const fmtMoney = (n)=>`$${Number(n||0).toLocaleString("en-US")}`;
    const statusLabel = (s)=>{
      if(s==="in") return "–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ";
      if(s==="order") return "–í –¥–æ—Ä–æ–∑—ñ";
      if(s==="sold") return "–ü—Ä–æ–¥–∞–Ω–æ";
      return s || "‚Äî";
    };

    function placeholderSvg(){
      return "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='700'%3E%3Crect width='100%25' height='100%25' fill='%230b0f14'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23ffd84a' font-family='Arial' font-size='48'%3EAuto%20GBP%3C/text%3E%3C/svg%3E";
    }

    function cardHTML(c){
      const cover = (c.photos && c.photos.length) ? c.photos[0] : "";
      const tag = (c.tags && c.tags.length) ? c.tags[0] : "";
      const isIn = c.status === "in";

      return `
        <div class="card">
          <div class="cover">
            ${cover ? `<img src="${cover}" alt="${c.title}">` : `<img src="${placeholderSvg()}" alt="Auto GBP">`}
            <div class="badges">
              <span class="badge gold">${c.origin || "‚Äî"}</span>
              <span class="badge ${isIn ? "green" : ""}">${statusLabel(c.status)}</span>
              ${tag ? `<span class="badge">${tag}</span>` : ""}
            </div>
            <div class="flag">${(c.title||"")[0] ? (c.title.match(/[A-Z]/)?.[0] || "A") : "A"}</div>
          </div>

          <div class="content">
            <div class="title-row">
              <div>
                <h3>${c.title} ‚Ä¢ ${c.year || ""}</h3>
                <div class="subtitle">${c.note || ""}</div>
              </div>
            </div>

            <div class="specs">
              <div class="spec"><span>–ö—É–∑–æ–≤</span><b>${c.body || "‚Äî"}</b></div>
              <div class="spec"><span>–ü—Ä–∏–≤—ñ–¥</span><b>${c.drive || "‚Äî"}</b></div>
              <div class="spec"><span>–î–≤–∏–≥—É–Ω</span><b>${c.engine || "‚Äî"}</b></div>
              <div class="spec"><span>–õ–æ–∫–∞—Ü—ñ—è</span><b>${c.location || "‚Äî"}</b></div>
            </div>

            <div class="price-row">
              <div class="price">${fmtMoney(c.price)}<small>–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ</small></div>
              <div class="card-actions">
                <button class="smallbtn" data-open="${c.id}">‚ÑπÔ∏è –î–µ—Ç–∞–ª—ñ</button>
                <a class="smallbtn gold" target="_blank" rel="noopener"
                   href="${writeLink(`–•–æ—á—É –ø–æ –∞–≤—Ç–æ: ${c.title} ${c.year}. –¶—ñ–Ω–∞: ${fmtMoney(c.price)}.`)}">üìù –ó–∞—è–≤–∫–∞</a>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function render(list){
      $("grid").innerHTML = list.map(cardHTML).join("");
      $("counter").textContent = `–ü–æ–∫–∞–∑–∞–Ω–æ: ${list.length}`;
      $("statTotal").textContent = CARS.length;

      document.querySelectorAll("[data-open]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const id = btn.getAttribute("data-open");
          const car = CARS.find(x=>x.id===id);
          if(car) openModal(car);
        });
      });
    }

    function applyFilters(){
      const qq = ($("q").value||"").trim().toLowerCase();
      const st = $("status").value || "";
      const yMin = Number($("yearMin").value || 0);
      const pMax = Number($("priceMax").value || 0);

      let list = CARS.slice();

      if(qq){
        list = list.filter(c => (c.title||"").toLowerCase().includes(qq));
      }
      if(st){
        list = list.filter(c => c.status === st);
      }
      if(yMin){
        list = list.filter(c => Number(c.year||0) >= yMin);
      }
      if(pMax){
        list = list.filter(c => Number(c.price||0) <= pMax);
      }

      render(list);
    }

    // ===== Modal
    const modal = $("modal");
    const thumbs = $("thumbs");

    function setActiveImage(src){
      $("mImg").src = src || placeholderSvg();
      [...thumbs.querySelectorAll(".thumb")].forEach(t=>{
        t.classList.toggle("active", t.dataset.src === src);
      });
    }

    function openModal(c){
      modal.classList.add("open");
      modal.setAttribute("aria-hidden","false");

      $("mTitle").textContent = `${c.title} ‚Ä¢ ${c.year || ""}`;
      $("mNote").textContent = `${c.note || ""} ‚Ä¢ ${statusLabel(c.status)} ‚Ä¢ ${c.origin || ""}`;
      $("mBody").textContent = c.body || "‚Äî";
      $("mDrive").textContent = c.drive || "‚Äî";
      $("mEngine").textContent = c.engine || "‚Äî";
      $("mLoc").textContent = c.location || "‚Äî";
      $("mYear").textContent = c.year || "‚Äî";
      $("mMileage").textContent = c.mileage || "‚Äî";
      $("mDesc").textContent = c.desc || "‚Äî";
      $("mPrice").innerHTML = `${fmtMoney(c.price)}<small>–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ</small>`;

      $("mWrite").href = writeLink(`–•–æ—á—É –ø–æ –∞–≤—Ç–æ: ${c.title} ${c.year}. –¶—ñ–Ω–∞: ${fmtMoney(c.price)}.`);

      const pics = (c.photos && c.photos.length) ? c.photos : [];
      thumbs.innerHTML = pics.map((p,i)=>`
        <div class="thumb ${i===0 ? "active":""}" data-src="${p}">
          <img src="${p}" alt="photo ${i+1}">
        </div>
      `).join("");

      if(!pics.length){
        thumbs.innerHTML = "";
        setActiveImage("");
      }else{
        setActiveImage(pics[0]);
        thumbs.querySelectorAll(".thumb").forEach(t=>{
          t.addEventListener("click", ()=> setActiveImage(t.dataset.src));
        });
      }

      $("mCopy").onclick = async ()=>{
        const txt =
`Auto GBP ‚Äî –ê–≤—Ç–æ
${c.title}
–†—ñ–∫: ${c.year}
–¶—ñ–Ω–∞: ${fmtMoney(c.price)}
–ü—Ä–æ–±—ñ–≥: ${c.mileage || "‚Äî"}
–ö—É–∑–æ–≤: ${c.body || "‚Äî"}
–ü—Ä–∏–≤—ñ–¥: ${c.drive || "‚Äî"}
–î–≤–∏–≥—É–Ω: ${c.engine || "‚Äî"}
–°—Ç–∞—Ç—É—Å: ${statusLabel(c.status)}
–õ–æ–∫–∞—Ü—ñ—è: ${c.location || "‚Äî"}`;
        try{
          await navigator.clipboard.writeText(txt);
          $("mCopy").textContent = "‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ";
          setTimeout(()=> $("mCopy").textContent = "üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏", 1200);
        }catch(e){
          alert("–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏. –°–ø—Ä–æ–±—É–π –≤—Ä—É—á–Ω—É.");
        }
      };
    }

    function closeModal(){
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden","true");
    }

    $("mClose").addEventListener("click", closeModal);
    modal.addEventListener("click", (e)=>{ if(e.target===modal) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") closeModal(); });

    // ===== Events
    $("apply").addEventListener("click", applyFilters);
    $("reset").addEventListener("click", ()=>{
      $("q").value = "";
      $("status").value = "";
      $("yearMin").value = "";
      $("priceMax").value = "";
      applyFilters();
    });

    ["q","yearMin","priceMax"].forEach(id=>{
      $(id).addEventListener("keydown",(e)=>{ if(e.key==="Enter") applyFilters(); });
    });
    $("status").addEventListener("change", applyFilters);

    // init
    render(CARS);
  </script>
</body>
</html>
